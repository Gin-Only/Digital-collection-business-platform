<!DOCTYPE html>
<html class="x-admin-sm">

<head>
    <meta charset="UTF-8" />
    <title>AI模型管理平台</title>
    <meta name="renderer" content="webkit" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport"
        content="width=device-width, initial-scale=0.8, minimum-scale=0.4, target-densitydpi=low-dpi" />
    <link rel="stylesheet" href="./css/font.css" />
    <link rel="stylesheet" href="./css/xadmin.css" />
    <script src="./lib/layui/layui.js" charset="utf-8"></script>
    <script type="text/javascript" src="./js/xadmin.js"></script>
</head>

<body>
    <div class="x-nav">
        <span class="layui-breadcrumb">
            <a href="">首页</a>
            <a href="">演示</a>
            <a><cite>导航元素</cite></a>
        </span>
        <a class="layui-btn layui-btn-small" style="line-height: 1.6em; margin-top: 3px; float: right"
            onclick="location.reload()" title="刷新">
            <i class="layui-icon layui-icon-refresh"></i>
        </a>
    </div>
    <div class="layui-fluid">
        <div class="layui-row layui-col-space15">
            <div class="layui-col-md12">
                <div class="layui-card">
                    <div class="layui-card-body">
                        <!-- 省略其他搜索表单部分 -->
                    </div>
                    <div class="layui-card-header">
                        <button class="layui-btn layui-btn-danger" onclick="delAll()">
                            <i class="layui-icon"></i>批量删除
                        </button>
                        <button class="layui-btn" onclick="xadmin.open('添加模型', './order-add1.html', 800, 600)">
                            <i class="layui-icon"></i>添加
                        </button>
                    </div>
                    <div class="layui-card-body">
                        <table class="layui-table layui-form">
                            <thead>
                                <tr>
                                    <th>生成标签</th>
                                    <th>测试备注</th>
                                    <th>本体模型</th>
                                    <th>测试模型</th>
                                    <th>描述</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody id="modelList">
                                <!-- 动态生成的内容 -->
                            </tbody>
                        </table>
                    </div>
                    <div id="pagination" style="text-align: center"></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        layui.use(['form', 'layer', 'jquery'], function () {
            var form = layui.form,
                layer = layui.layer,
                $ = layui.jquery;

            // 加载时显示存储的数据
            displayStoredModels();

            function displayStoredModels() {
                var models = JSON.parse(localStorage.getItem("formData") || "[]");
                console.log('models', models);
                var tbody = $("#modelList");
                tbody.empty(); // 清除旧数据
                models.forEach(function (model) {
                    var rowHTML = `<tr>
                <td>${model.shipping}</td>
                <td>${model.contrller}</td>
                <td>${model.baseModel}</td>
                <td>${model.testModel}</td>
                <td>${model.description}</td>
                <td class="td-manage">
                    <a title="编辑" onclick="xadmin.open('编辑','model-edit.html?id=${model.id}',800,600)" href="javascript:;">
                        <i class="layui-icon">&#xe642;</i></a>
                    <a title="删除" onclick="model_del(this,'${model.id}')" href="javascript:;">
                        <i class="layui-icon">&#xe640;</i></a>
                </td>
            </tr>`;
                    tbody.append(rowHTML);
                });
            }

            function model_del(obj, id) {
                layer.confirm("确认要删除吗？", function (index) {
                    $(obj).parents("tr").remove();
                    layer.msg("已删除!", { icon: 1, time: 1000 });
                });
            }

            function delAll() {
                layer.confirm("确认要删除吗？", function (index) {
                    $(".layui-form-checked").not(".header").parents("tr").remove();
                    layer.msg("删除成功", { icon: 1 });
                });
            }
        });
    </script>
</body>

</html>